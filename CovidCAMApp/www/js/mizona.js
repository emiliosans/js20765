let arrayzbs = [
    "Abrantes",
    "Acacias",
    "Adelfas",
    "Alameda",
    "Alameda de Osuna",
    "Alcalde Bartolomé González",
    "Alcalá de Guadaira",
    "Alcobendas - Chopera",
    "Alcocer",
    "Algete",
    "Alicante",
    "Almendrales",
    "Alpedrete",
    "Alpes",
    "Andrés Mellado",
    "Ángela Uriarte",
    "Antonio Leyva",
    "Aquitania",
    "Aranjuez",
    "Aravaca",
    "Arganda del Rey",
    "Arganda - Felicidad",
    "Argüelles",
    "Arroyomolinos",
    "Barajas",
    "Barcelona",
    "Barrio del Puerto",
    "Baviera",
    "Benita de Ávila",
    "Boadilla del Monte",
    "Brújula",
    "Buenavista",
    "Buitrago de Lozoya",
    "Bustarviejo",
    "Butarque",
    "Cadalso de los Vidrios",
    "Campamento",
    "Campo Real",
    "Campo de la Paloma",
    "Canal de Panamá",
    "Canillejas",
    "Carabanchel Alto",
    "Caramuel",
    "Carmen Calzado",
    "Casa de Campo",
    "Castelló",
    "Castilla la Nueva",
    "Cea Bermúdez",
    "Cercedilla",
    "Chopera",
    "Ciempozuelos",
    "Ciudad San Pablo",
    "Ciudad de los Periodistas",
    "Collado Mediano",
    "Collado Villalba Estación",
    "Collado Villalba Pueblo",
    "Colmenar Viejo Norte",
    "Colmenar Viejo Sur",
    "Colmenar de Oreja",
    "Comillas",
    "Cortes",
    "Coslada - Jaime Vera",
    "Cuzco",
    "Daganzo de Arriba",
    "Daroca",
    "Dehesa Vieja",
    "Dos de Mayo",
    "Doctor Cirajas",
    "Doctor Laín Entralgo",
    "Doctor Luengo Rodríguez",
    "Doctor Tamames",
    "Doctor Trueta",
    "El Bercial",
    "El Escorial",
    "El Espinillo",
    "El Greco",
    "El Juncal",
    "El Molar",
    "El Naranjo",
    "El Pardo",
    "El Restón",
    "El Soto",
    "Eloy Gonzalo",
    "Embajadores",
    "Ensanche Vallecas",
    "Entrevías",
    "Espronceda",
    "Estrecho de Corea",
    "Estrella",
    "Europa",
    "Federica Montseny",
    "Felipe II",
    "Francia",
    "Fuencarral",
    "Fuente el Saz",
    "Fuentelarreina",
    "Galapagar",
    "Gandhi",
    "García Noblejas",
    "General Fanjul",
    "General Moscardó",
    "General Oráa",
    "General Ricardos",
    "Getafe Norte",
    "Goya",
    "Gregorio Marañón",
    "Griñón",
    "Guadarrama",
    "Guayaba",
    "Guzmán el Bueno",
    "Huerta de Los Frailes",
    "Humanes de Madrid",
    "Ibiza",
    "Imperial",
    "Infanta Mercedes",
    "Isabel II",
    "Jazmín",
    "Juan de Austria",
    "Juan de la Cierva",
    "Justicia",
    "La Cabrera",
    "La Elipa",
    "La Garena",
    "La Marazuela",
    "La Moraleja",
    "La Plata",
    "La Princesa",
    "La Ribota",
    "La Ventilla",
    "La Veredilla",
    "Las Águilas",
    "Las Américas",
    "Las Calesas",
    "Las Ciudades",
    "Las Fronteras",
    "Las Margaritas",
    "Las Matas",
    "Las Olivas",
    "Las Rozas",
    "Las Tablas",
    "Lavapiés",
    "Leganés Norte",
    "Legazpi",
    "Londres",
    "Los Alperchines",
    "Los Ángeles",
    "Los Castillos",
    "Los Cármenes",
    "Los Fresnos",
    "Los Pedroches",
    "Los Rosales",
    "Los Yébenes",
    "Lucero",
    "Luis Vives",
    "Majadahonda",
    "Manuel Merino",
    "Manzanares El Real",
    "Maqueda",
    "Mar Báltico",
    "Marqués de la Valdavia",
    "Martín de Vargas",
    "Martínez de la Riva",
    "María Curie",
    "María Montessori",
    "María de Guzmán",
    "Meco",
    "Media Legua",
    "Mejorada del Campo",
    "Mendiguchía Carriche",
    "Miguel Servet",
    "Miguel de Cervantes",
    "Miraflores",
    "Mirasierra",
    "Monforte de Lemos",
    "Monovar",
    "Montecarmelo",
    "Monterrozas",
    "Montesa",
    "Moralzarzal",
    "Morata de Tajuña",
    "María Jesús Hereza",
    "Méndez Álvaro",
    "Navalcarnero",
    "Navas del Rey",
    "Nuestra Señora del Pilar",
    "Numancia",
    "Nuñez Morgado",
    "Opañel",
    "Orcasitas",
    "Orcasur",
    "Pacífico",
    "Palma Universidad",
    "Palomares",
    "Panaderas",
    "Paracuellos del Jarama",
    "Parque Coimbra",
    "Parque Europa",
    "Parque Loranca",
    "Parque Oeste",
    "Pavones",
    "Perales de Tajuña",
    "Perales del Río",
    "Peña Prieta",
    "Peñagrande",
    "Pilar",
    "Pinto",
    "Pintores",
    "Pizarro",
    "Portazgo",
    "Potosí",
    "Pozo de Tío Raimundo",
    "Pozuelo - Estación",
    "Pozuelo - Somosaguas",
    "Presentación Sabio",
    "Prosperidad",
    "Puerta Bonita",
    "Puerta de Madrid",
    "Puerta del Ángel",
    "Quinta de los Molinos",
    "Rafael Alberti",
    "Ramón y Cajal",
    "Rascafría",
    "Reina Victoria",
    "Rejas",
    "Reyes Católicos",
    "Reyes Magos",
    "Rivas - La Paz",
    "Rivas - Santa Mónica",
    "Rivas - 1º de Mayo",
    "Robledo de Chavela",
    "Rosa Luxemburgo",
    "San Andrés",
    "San Blas",
    "San Cristóbal",
    "San Diego",
    "San Fermín",
    "San Fernando",
    "San Isidro",
    "San Juan de la Cruz",
    "San Lorenzo de El Escorial",
    "San Martín de Valdeiglesias",
    "San Martín de la Vega",
    "Sanchinarro",
    "Santa Eugenia",
    "Sector Embarcaciones",
    "Sector III",
    "Sector Oficios",
    "Segovia",
    "Segre",
    "Sevilla la Nueva",
    "Sierra de Guadarrama",
    "Silvano",
    "Simancas",
    "Soto del Real",
    "Sánchez Morate",
    "Torrelaguna",
    "Torrelodones",
    "Torres de la Alameda",
    "V Centenario",
    "Valdeacederas",
    "Valdebernardo",
    "Valdelasfuentes",
    "Valdemorillo",
    "Valdemoro",
    "Valderribas",
    "Valdezarza",
    "Valle Inclán",
    "Valle de la Oliva",
    "Valleaguado",
    "Vandel",
    "Vicente Muzas",
    "Vicálvaro - Artilleros",
    "Vicálvaro - Villablanca",
    "Villa Vallecas",
    "Villa del Prado",
    "Villaamil",
    "Villanueva de la Cañada",
    "Villanueva del Pardillo",
    "Villarejo de Salvanés",
    "Villaviciosa de Odón",
    "Vinateros - Torito",
    "Virgen de Begoña",
    "Virgen del Cortijo",
    "Virgen del Val",
    "Vista Alegre",
    "Zofío"
]
let arraylocalidades = [
    "Madrid-Retiro",
    "Madrid-Salamanca",
    "Madrid-Centro",
    "Madrid-Arganzuela",
    "Madrid-Chamartín",
    "Madrid-Tetuán",
    "Madrid-Chamberí",
    "Madrid-Fuencarral-El Pardo",
    "Madrid-Moncloa-Aravaca",
    "Madrid-Latina",
    "Madrid-Carabanchel",
    "Madrid-Usera",
    "Madrid-Puente de Vallecas",
    "Madrid-San Blas - Canillejas",
    "Madrid-Barajas",
    "Madrid-Moratalaz",
    "Madrid-Ciudad Lineal",
    "Madrid-Hortaleza",
    "Madrid-Villaverde",
    "Madrid-Villa de Vallecas",
    "Madrid-Vicálvaro",
    "Pozuelo de Alarcón",
    "Alcorcón",
    "Navalcarnero",
    "San Agustín del Guadalix",
    "Las Rozas de Madrid",
    "Moraleja de Enmedio",
    "Valdaracete",
    "Pozuelo del Rey",
    "Puebla de la Sierra",
    "Perales de Tajuña",
    "Valdemorillo",
    "Navalafuente",
    "Velilla de San Antonio",
    "Villanueva de la Cañada",
    "Villanueva del Pardillo",
    "Nuevo Baztán",
    "Villamantilla",
    "Villamanta",
    "Cabanillas de la Sierra",
    "Cenicientos",
    "Puentes Viejas",
    "Aranjuez",
    "Cercedilla",
    "Santorcaz",
    "Coslada",
    "Morata de Tajuña",
    "Robregordo",
    "Navarredonda y San Mamés",
    "Venturada",
    "Navacerrada",
    "Montejo de la Sierra",
    "Fresno de Torote",
    "Pinilla del Valle",
    "Valdemaqueda",
    "Navas del Rey",
    "Olmeda de las Fuentes",
    "Bustarviejo",
    "Becerril de la Sierra",
    "Fuenlabrada",
    "Garganta de los Montes",
    "Pinto",
    "Alameda del Valle",
    "Berzosa del Lozoya",
    "Los Santos de la Humosa",
    "El Álamo",
    "Pelayos de la Presa",
    "Galapagar",
    "Griñón",
    "Gargantilla del Lozoya y Pinilla de Buitrago",
    "Aldea del Fresno",
    "Carabaña",
    "Talamanca de Jarama",
    "Chapinería",
    "Ciempozuelos",
    "Ajalvir",
    "San Lorenzo de El Escorial",
    "Gascones",
    "San Martín de la Vega",
    "Móstoles",
    "Leganés",
    "Braojos",
    "Cubas de la Sagra",
    "Algete",
    "Mejorada del Campo",
    "Loeches",
    "Parla",
    "Fuentidueña de Tajo",
    "Ambite",
    "Torremocha de Jarama",
    "Anchuelo",
    "Los Molinos",
    "Soto del Real",
    "Valverde de Alcalá",
    "Fuente el Saz de Jarama",
    "Horcajo de la Sierra-Aoslos",
    "Valdeolmos-Alalpardo",
    "Campo Real",
    "Valdeavero",
    "Villamanrique de Tajo",
    "Cobeña",
    "Fresnedillas de la Oliva",
    "Valdilecha",
    "El Berrueco",
    "Pezuela de las Torres",
    "Villar del Olmo",
    "Guadarrama",
    "San Martín de Valdeiglesias",
    "Torrelodones",
    "Boadilla del Monte",
    "Torrejón de Velasco",
    "Villanueva de Perales",
    "Tielmes",
    "San Sebastián de los Reyes",
    "Guadalix de la Sierra",
    "Humanes de Madrid",
    "Chinchón",
    "Cadalso de los Vidrios",
    "Hoyo de Manzanares",
    "Torrejón de la Calzada",
    "Estremera",
    "Corpa",
    "Meco",
    "Madarcos",
    "Zarzalejo",
    "Arganda del Rey",
    "Collado Mediano",
    "Daganzo de Arriba",
    "Manzanares El Real",
    "Buitrago del Lozoya",
    "Valdelaguna",
    "Valdepiélagos",
    "Casarrubuelos",
    "Miraflores de la Sierra",
    "Paracuellos de Jarama",
    "El Vellón",
    "Lozoya",
    "Collado Villalba",
    "Colmenarejo",
    "Villavieja del Lozoya",
    "Prádena del Rincón",
    "La Cabrera",
    "Sevilla la Nueva",
    "La Acebeda",
    "Redueña",
    "Robledillo de la Jara",
    "La Serna del Monte",
    "Colmenar de Oreja",
    "Rozas de Puerto Real",
    "Valdemanco",
    "Brunete",
    "Titulcia",
    "Villa del Prado",
    "Lozoyuela-Navas-Sieteiglesias",
    "Quijorna",
    "Valdemoro",
    "Tres Cantos",
    "Torrelaguna",
    "Rivas-Vaciamadrid",
    "El Atazar",
    "Pedrezuela",
    "Santa María de la Alameda",
    "Horcajuelo de la Sierra",
    "Arroyomolinos",
    "Moralzarzal",
    "Canencia",
    "Villarejo de Salvanés",
    "Serranillos del Valle",
    "Villaviciosa de Odón",
    "Camarma de Esteruelas",
    "Robledo de Chavela",
    "Patones",
    "Navalagamella",
    "Rascafría",
    "El Boalo",
    "Majadahonda",
    "Batres",
    "Alcobendas",
    "Alcalá de Henares",
    "Colmenar Viejo",
    "San Fernando de Henares",
    "Villalbilla",
    "El Escorial",
    "Colmenar del Arroyo",
    "Torrejón de Ardoz",
    "Piñuécar-Gandullas",
    "Brea de Tajo",
    "El Molar",
    "Belmonte de Tajo",
    "Torres de la Alameda",
    "Somosierra",
    "Alpedrete",
    "Orusco de Tajuña",
    "La Hiruela",
    "Cervera de Buitrago",
    "Getafe",
    "Ribatejada",
    "Villaconejos",
    "Valdetorres de Jarama"
]

// SELECTOR DE MUNICIPIOS y ZBS
let selectMunicipio = document.getElementById('municipios'); //Capturo el select
let selectZBS = document.getElementById('zbs');
const boton = document.querySelector('#boton');
const zonasActuales = document.querySelector('#zonasActuales');

boton.addEventListener('click', () => {
    const municipio = selectMunicipio.value;
    const zbs = selectZBS.value;
    console.log('municipio', municipio);
    console.log('zbs', zbs);

    if (municipio) {
        deleteLocalStorage('covidCAM_municipio');
        saveToLocalStorage('covidCAM_municipio', {
            municipio
        });
    }
    if (zbs) {
        deleteLocalStorage('covidCAM_zbs');
        saveToLocalStorage('covidCAM_zbs', {
            zbs
        });
    }

    zonasActuales.innerHTML = pintarZonasPredeterminadas();
});

const deleteLocalStorage = function (key) {
    console.log('delete', key);
    if (key) {
        localStorage.removeItem(key);
    }
}

const saveToLocalStorage = function (key, value) {
    console.log('save', key, value);
    if (key && value) {
        localStorage.setItem(key, JSON.stringify(value));
    }
}

const pintarZonasPredeterminadas = function () {
    const municipio = JSON.parse(localStorage.getItem('covidCAM_municipio'));
    const zbs = JSON.parse(localStorage.getItem('covidCAM_zbs'));
    console.log('municipio', municipio);
    console.log('zbs', zbs);
    if (!municipio && !zbs) {
        return 'No hay zonas guardadas actualmente';
    }
    let html = '';

    html += municipio ? `<p>Municipio/distrito: <span style="color:orangered">${municipio.municipio}.</span></p>` : '';
    html += zbs ? `<p>ZBS: <span style="color:orangered">${zbs.zbs}.</span></p>` : '';

    return html;
}

function init() {
    //rellenar el selector de municipios

    arraylocalidades.sort(); //ordeno la lista de municipios
    arrayzbs.sort(); //ordeno la lista de zbs

    let item_localidad;
    for (localidad of arraylocalidades) { //incluyo los municipios en el select

        item_localidad = document.createElement("ion-select-option"); //creo elemento
        item_localidad.innerHTML = localidad; //le meto la localidad

        selectMunicipio.appendChild(item_localidad); //añado al padre
    }

    let item_zbs;
    for (zona of arrayzbs) { //incluyo los municipios en el select

        item_zbs = document.createElement("ion-select-option"); //creo elemento
        item_zbs.innerHTML = zona;
        selectZBS.appendChild(item_zbs); //añado al padre
    }

    zonasActuales.innerHTML = pintarZonasPredeterminadas();
}


init(); //Añade las listas de municipios y zbs a los selects